<div class="container">
  <h1 class="text-center"><%= @group.name %></h1>


  <div class="groups-grid">
    <div class="friends">
      <h3 class="text-center"> Friends</h3>
      <ul>
        <%# friends %>
          <% if current_user && current_user == @group.user %>
            <% @users.each do |user| %>
              <% unless @group.members.map { |member| member.user }.include? user %>
                <li class="list-group-item">
                  <div>
                    <% if user.photo.attached? %>
                      <%= cl_image_tag user.photo.key, class: "avatar" %>
                    <% else %>
                      <%= image_tag "notimage.png", class: "avatar", alt: "dropdown menu" %>
                    <% end %>
                    <%= user.first_name %>
                  </div>

                  <%= link_to group_members_path(@group, user_id: user.id), data: { turbo_method: :post } do %>
                    <i class="fa-solid fa-plus" style="color: #0ed100;"></i>
                  <% end %>
                </li>
              <% end %>
            <% end %>
          <% end %>
      </ul>
    </div>
        <%# Setas %>
    <div class="arrows">
      <i class="fa-solid fa-arrow-right fa-lg"></i>
      <i class="fa-solid fa-arrow-left fa-lg"></i>
    </div>
      <%# members grp %>
      <div class="members">
        <h3><%= @group.category %></h3>
        <ul>
          <% @group.members.each do |member| %>
            <li class="list-group-item">
              <div>
                <% if member.user.photo.attached? %>
                  <%= cl_image_tag member.user.photo.key, class: "avatar" %>
                  <% else %>
                  <%= image_tag "notimage.png", class: "avatar", alt: "dropdown menu" %>
                <% end %>
                <%= member.user.first_name %>
              </div>
              <% if  current_user == @group.user %>
                <% unless current_user == member.user %>
                  <%= link_to member_path(member), data: { turbo_method: :delete } do %>
                    <i class="fa-solid fa-xmark" style="color: #ff0000;"></i>
                  <% end %>
                <% end %>
              <% end %>
            </li>
          <% end %>
        </ul>
    <% if current_user == @group.user %>
      <%= link_to "Let's roll", group_activities_path(@group.id), class:"button-black "  %>
    <% end %>
      </div>
  </div>
  <div>
    <%# <%= link_to "Back", groups_path, <i class="fa-regular fa-pen-to-square" style="color: #000000;"></i> %>
    <%= link_to groups_path do %><i class="fa-solid fa-circle-chevron-left fa-xl" style="color: #000000;"></i><% end %>

    <% if current_user == @group.user %>
      <%= link_to edit_group_path(@group) do %><i class="fa-regular fa-pen-to-square fa-xl" style="color: #000000;"></i><%end%>
      <%= link_to group_path(@group), data: { turbo_method: :delete, turbo_confirm: 'Are you sure?' } do %><i class="fa-regular fa-trash-can fa-xl" style="color: #000000;"></i><% end %>
    <% end %>
  </div>

  </div>
  </div>

  </div>
</div>

<div class="container map-default mt-2" style="width: 100%; height: 600px;"
    data-controller="map"
    data-map-markers-value="<%= @markers.to_json %>"
    data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
    <%# data-map-directions-value="<%= @directions %>
</div>
